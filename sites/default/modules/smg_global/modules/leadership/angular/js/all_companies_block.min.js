!function(){"use strict";var e=angular.module("all_companies_block",[]);e.controller("AllCompaniesBlockTermListCtrl",["$scope","$http","$attrs","$timeout",function(e,a,n,s){e.taxonomies={},e.taxonomies.companies={},e.companyListOrder="title",e.site=n.site,Drupal.settings.hasOwnProperty("leadership_all_companies_block")&&Drupal.settings.leadership_all_companies_block&&(e.taxonomies=Drupal.settings.leadership_all_companies_block),e.categoryOpen=function(a){null==a.show&&(a.loading=!0,e.getCompanies(a),"function"==typeof ga&&ga("send","event",{eventCategory:"Leadership Action - Category",eventAction:a.name,eventLabel:"Category Viewed in All Companies Block"})),a.show=!a.show},e.getCompanies=function(n){var t="/leaders/get-company-list/json/"+n.tid+"/1";a({method:"GET",url:t}).success(function(e,a,t,o){n.companies=e,s(function(){n.loading=!1},150),Drupal.settings.hasOwnProperty("pmg_youtube_feed_leadership")||(Drupal.settings.pmg_youtube_feed_leadership={}),Drupal.settings.hasOwnProperty("leadershipDatacard")||(Drupal.settings.leadershipDatacard={}),Drupal.settings.leadershipDatacard.hasOwnProperty(n.tid)||(Drupal.settings.leadershipDatacard[n.tid]=e)}),e.hasPmgYoutubeFeedVideos=function(e){return!(!e.pmg_youtube_feed_videos.hasOwnProperty(e.nid)||!e.pmg_youtube_feed_videos[e.nid].hasOwnProperty("videos"))}}}]),e.animation(".slideDown",function(){return{addClass:function(e,a,n){jQuery(e).slideDown(n)},removeClass:function(e,a,n){jQuery(e).slideUp(n)}}}),e.directive("companyList",function(){return{restrict:"E",replace:!0,template:'<li ng-repeat="company in taxonomy.companies | orderObjectBy:companyListOrder" leadership-link><a class="all-companies-block-text company-name leadership-link" href="{{company.alias}}">{{company.title}}</a><span class="youtube-amplified" ng-show="hasPmgYoutubeFeedVideos(company)"><span class="youtube-amplified-video-icon"></span></span><compile-data-card tid="{{company.tid}}" nid="{{company.datacard_nid}}" site="{{site}}" hover-state="hoverState"></compile-data-card></li>'}}),e.directive("taxonomyList",["$timeout",function(e){return{restrict:"E",link:function(e,a,n){e.$watch(function(){return e.taxonomy.show},function(n,s){var t=a.find(".leadership-menu");if(n){if(t.hasClass("slideDown")&&t.hasClass("hide")){t.removeClass("hide"),t.addClass("invisible"),t.css({"max-height":""});var o=t.height(),i=setInterval(function(){var e=t.height();0!=o&&e==o?(clearInterval(i),t.css("max-height",o),t.removeClass("invisible"),t.addClass("hide"),t.slideDown("fast",function(){t.removeClass("hide")})):o=e},15)}}else n||null==n||void 0==n||e.taxonomy.companies&&t.hasClass("slideUp")&&t.slideUp("slow",function(){t.addClass("hide")})})},template:'<div class="taxonomy-tid-{{taxonomy.tid}} taxonomy-tid"><span class="brackets" ng-click="categoryOpen(taxonomy)">[<span class="plus-minus"><span ng-show="!taxonomy.show">+</span><span ng-show="taxonomy.show">â€“</span></span>]</span>&nbsp;<span class="taxonomy-name all-companies-block-text" ng-click="categoryOpen(taxonomy)" ng-bind="taxonomy.name" ng-class="{loading: taxonomy.loading}"></span><ul class="company-list leadership-menu hide" ng-class="{slideDown: taxonomy.show, slideUp: !taxonomy.show}"><company-list></company-list></ul></div>'}}]),e.filter("orderObjectBy",function(){return function(e,a,n){var s=[];return angular.forEach(e,function(e){s.push(e)}),s.sort(function(e,n){return e[a]>n[a]?1:-1}),n&&s.reverse(),s}}),window.smgAngularDependencies.push("all_companies_block")}();